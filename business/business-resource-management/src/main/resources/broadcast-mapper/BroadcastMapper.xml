<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yjtech.wisdom.tourism.resource.broadcast.mapper.BroadcastMapper" >

    <select id="queryBroadcastSounds" resultType="com.yjtech.wisdom.tourism.resource.broadcast.entity.BroadcastEntity"
            parameterType="com.yjtech.wisdom.tourism.resource.broadcast.query.BroadcastSoundQuery">
        SELECT
            *
        FROM
            tb_broadcast tb LEFT JOIN tb_broadcast_group_compose tc ON tb.broadcast_id = tc.broadcast_id
        <where>
            tb.deleted = 0 and
            tb.broadcast_type = 0 and
            tb.status = 1 and
            tb.equip_status != 0
            <if test="params.name !=null and params.name !=''">
                and tb.name like concat('%', #{params.name}, '%')
            </if>
            <if test="params.groupId != null and params.groupId != ''">
                and tc.group_id = #{params.groupId}
            </if>
        </where>
    </select>
</mapper>